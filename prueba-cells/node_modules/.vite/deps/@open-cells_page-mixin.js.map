{
  "version": 3,
  "sources": ["../../@open-cells/page-mixin/src/PageMixin.js"],
  "sourcesContent": ["/*\n * Copyright 2024 Bilbao Vizcaya Argentaria, S.A.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { plugCellsCore } from '@open-cells/core-plugin';\nimport { dedupeMixin } from '@open-wc/dedupe-mixin';\n\nconst PageMixinImpl = base => {\n  return class extends base {\n    static get BRIDGE_PAGE_PRIVATE_CHANNEL_PREFIX() {\n      return '__oc_page_';\n    }\n\n    static getPagePrivateChannel(tagName) {\n      return `${this.BRIDGE_PAGE_PRIVATE_CHANNEL_PREFIX}${tagName\n        .toLowerCase()\n        .replace('-page', '')}`;\n    }\n\n    static get properties() {\n      return {\n        params: { type: Object },\n      };\n    }\n\n    constructor() {\n      super();\n      plugCellsCore(this);\n      this.params = {};\n    }\n\n    connectedCallback() {\n      super.connectedCallback();\n      this.__handleConnections();\n    }\n\n    __handleConnections() {\n      if (this.__hasPageHandlers()) {\n        this.__handlePagePrivateChannel();\n      }\n    }\n\n    __hasPageHandlers() {\n      return !!this.onPageEnter || !!this.onPageLeave;\n    }\n\n    __handlePagePrivateChannel() {\n      const channelName = this.constructor.getPagePrivateChannel(this.tagName);\n      const wrappedPrivateChannelCallback = this.__wrapPrivateChannelCallback();\n\n      this.subscribe(channelName, wrappedPrivateChannelCallback);\n    }\n\n    __wrapPrivateChannelCallback() {\n      return ({ value: pageStatusValue }) => {\n        const callback = () => {\n          if (pageStatusValue) {\n            this.onPageEnter && this.onPageEnter();\n          } else {\n            this.onPageLeave && this.onPageLeave();\n          }\n        };\n\n        if (callback) {\n          callback();\n        }\n      };\n    }\n  };\n};\n\nexport const PageMixin = dedupeMixin(PageMixinImpl);\n"],
  "mappings": ";;;;;;;;;;AAmBA,IAAM,gBAAgB,UAAQ;AAC5B,SAAO,cAAc,KAAK;AAAA,IACxB,WAAW,qCAAqC;AAC9C,aAAO;AAAA,IACT;AAAA,IAEA,OAAO,sBAAsB,SAAS;AACpC,aAAO,GAAG,KAAK,kCAAkC,GAAG,QACjD,YAAY,EACZ,QAAQ,SAAS,EAAE,CAAC;AAAA,IACzB;AAAA,IAEA,WAAW,aAAa;AACtB,aAAO;AAAA,QACL,QAAQ,EAAE,MAAM,OAAO;AAAA,MACzB;AAAA,IACF;AAAA,IAEA,cAAc;AACZ,YAAM;AACN,oBAAc,IAAI;AAClB,WAAK,SAAS,CAAC;AAAA,IACjB;AAAA,IAEA,oBAAoB;AAClB,YAAM,kBAAkB;AACxB,WAAK,oBAAoB;AAAA,IAC3B;AAAA,IAEA,sBAAsB;AACpB,UAAI,KAAK,kBAAkB,GAAG;AAC5B,aAAK,2BAA2B;AAAA,MAClC;AAAA,IACF;AAAA,IAEA,oBAAoB;AAClB,aAAO,CAAC,CAAC,KAAK,eAAe,CAAC,CAAC,KAAK;AAAA,IACtC;AAAA,IAEA,6BAA6B;AAC3B,YAAM,cAAc,KAAK,YAAY,sBAAsB,KAAK,OAAO;AACvE,YAAM,gCAAgC,KAAK,6BAA6B;AAExE,WAAK,UAAU,aAAa,6BAA6B;AAAA,IAC3D;AAAA,IAEA,+BAA+B;AAC7B,aAAO,CAAC,EAAE,OAAO,gBAAgB,MAAM;AACrC,cAAM,WAAW,MAAM;AACrB,cAAI,iBAAiB;AACnB,iBAAK,eAAe,KAAK,YAAY;AAAA,UACvC,OAAO;AACL,iBAAK,eAAe,KAAK,YAAY;AAAA,UACvC;AAAA,QACF;AAEA,YAAI,UAAU;AACZ,mBAAS;AAAA,QACX;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;AAEO,IAAM,YAAY,YAAY,aAAa;",
  "names": []
}
